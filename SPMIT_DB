CREATE TABLE KLIENT(
PESEL VARCHAR(11) PRIMARY KEY,
IMIE TEXT NOT NULL,
NAZWISKO TEXT NOT NULL
);

CREATE TABLE LEK(
ID_LEK INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
NAZWA TEXT NOT NULL, 
SUBSTANCJA TEXT NOT NULL,
ILOSC INTEGER,
CENA FLOAT NOT NULL,
X INTEGER NOT NULL,
Y INTEGER NOT NULL
);

CREATE TABLE RECEPTA(
ID_RECEPTA INTEGER PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
PESEL VARCHAR(11) NOT NULL,
KOD INTEGER NOT NULL,
CONSTRAINT FK_KLIENT
FOREIGN KEY(PESEL)
REFERENCES KLIENT(PESEL)
);

CREATE TABLE LEK_RECEPTA(
ID_RECEPTA INTEGER REFERENCES RECEPTA(ID_RECEPTA) ON UPDATE CASCADE ON DELETE CASCADE,
ID_LEK INTEGER REFERENCES LEK(ID_LEK) ON UPDATE CASCADE,
ILOSC INTEGER NOT NULL DEFAULT 1,
CONSTRAINT LEK_RECEPTA_PK PRIMARY KEY (ID_RECEPTA, ID_LEK)
);



